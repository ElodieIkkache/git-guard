<!DOCTYPE html>
<html>

<head>
	<title>GIT-Guard</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!--favicon-->
	<link rel= "icon" type="image/png" href = "favicon.png"/>
  
  
	<!--boostrap-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<style>
		body {
		   background-image:  url(bg.jpg);
		   background-repeat : no-repeat;
		   background-attachment : fixed;
		   text-align: center;
		}
		
		p {
			text-align: left;
			color: #ffffff;
		}
		
		h5{
			font-size: 20px;
		}
		
		h3 {
			color: #513742;
			font-size: 30px;
		}
		
		h2{
			color: #ffffff;
			font-size: 40px;
		}
		
		h1 { 
			color: #f4a460;
			font-size: 100px;
			font-family: Papyrus;
		}
		
		.visual {
			background-color:rgba(0, 0, 1, 0.5);
			padding : 30px;
			margin-left : 250px;
			margin-right : 250px;
		}
		
		
      rect.bordered {
        stroke: #E6E6E6;
        stroke-width:2px;   
      }

      text.mono {
        font-size: 9pt;
        font-family: Consolas, courier;
        fill: #aaa;
      }

      text.axis-workweek {
        fill: #000;
      }

      text.axis-worktime {
        fill: #000;
      }
    </style>
	
	
    <script src="http://d3js.org/d3.v3.js"></script>
  </head>
  
  
  <body>
  <div>
		<h1>GIT- Guard</h1>
		<h2>commit history of all members</h2>
		<div class="visual">
			<p>A heatmap will show you the commits of each team member, for a chosen file. You can also select the period of time you are interested in. Otherwise, the graph will display the history from the start of the project until now. It is possible to focus only on a chuck of lines.</p>
			<br>
			<form id = "form4" class="form-inline">
			<div class="input-group">
				<input type="text" class="form-control" size="50" id="file" placeholder="please choose a file" required>
			</div>
			<div class = "date">
			<p> From : </p>
			<select name="day">
				<option value="0">...</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>
				<option value="11">11</option>
				<option value="12">12</option>
				<option value="13">13</option>
				<option value="14">14</option>
				<option value="15">15</option>
				<option value="16">16</option>
				<option value="17">17</option>
				<option value="18">18</option>
				<option value="19">19</option>
				<option value="20">20</option>
				<option value="21">21</option>
				<option value="22">22</option>
				<option value="23">23</option>
				<option value="24">24</option>
				<option value="25">25</option>
				<option value="26">26</option>
				<option value="27">27</option>
				<option value="28">28</option>
				<option value="29">29</option>
				<option value="30">30</option>
				<option value="31">31</option>
			</select>
			
			<select name="month">
				<option value="0">...</option>
				<option value="1">January</option>
				<option value="2">February</option>
				<option value="3">Mars</option>
				<option value="4">April</option>
				<option value="5">Mai</option>
				<option value="6">June</option>
				<option value="7">July</option>
				<option value="8">August</option>
				<option value="9">September</option>
				<option value="10">October</option>
				<option value="11">November</option>
				<option value="12">December</option>
			</select>
			
			<select name="year">
				<option value="0">...</option>
				<option value="2000">2000</option>
				<option value="2001">2001</option>
				<option value="2002">2002</option>
				<option value="2003">2003</option>
				<option value="2004">2004</option>
				<option value="2005">2005</option>
				<option value="2006">2006</option>
				<option value="2007">2007</option>
				<option value="2008">2008</option>
				<option value="2009">2009</option>
				<option value="2010">2010</option>
				<option value="2011">2011</option>
				<option value="2012">2012</option>
				<option value="2013">2013</option>
				<option value="2014">2014</option>
				<option value="2015">2015</option>
				<option value="2016">2016</option>
				<option value="2017">2017</option>
			</select>
			
			
			<p> To : </p>
			<select name="day">
				<option value="0">...</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>
				<option value="11">11</option>
				<option value="12">12</option>
				<option value="13">13</option>
				<option value="14">14</option>
				<option value="15">15</option>
				<option value="16">16</option>
				<option value="17">17</option>
				<option value="18">18</option>
				<option value="19">19</option>
				<option value="20">20</option>
				<option value="21">21</option>
				<option value="22">22</option>
				<option value="23">23</option>
				<option value="24">24</option>
				<option value="25">25</option>
				<option value="26">26</option>
				<option value="27">27</option>
				<option value="28">28</option>
				<option value="29">29</option>
				<option value="30">30</option>
				<option value="31">31</option>
			</select>
			
			<select name="month">
				<option value="0">...</option>
				<option value="1">January</option>
				<option value="2">February</option>
				<option value="3">Mars</option>
				<option value="4">April</option>
				<option value="5">Mai</option>
				<option value="6">June</option>
				<option value="7">July</option>
				<option value="8">August</option>
				<option value="9">September</option>
				<option value="10">October</option>
				<option value="11">November</option>
				<option value="12">December</option>
			</select>
			
			<select name="year">
				<option value="0">...</option>
				<option value="2000">2000</option>
				<option value="2001">2001</option>
				<option value="2002">2002</option>
				<option value="2003">2003</option>
				<option value="2004">2004</option>
				<option value="2005">2005</option>
				<option value="2006">2006</option>
				<option value="2007">2007</option>
				<option value="2008">2008</option>
				<option value="2009">2009</option>
				<option value="2010">2010</option>
				<option value="2011">2011</option>
				<option value="2012">2012</option>
				<option value="2013">2013</option>
				<option value="2014">2014</option>
				<option value="2015">2015</option>
				<option value="2016">2016</option>
				<option value="2017">2017</option>
			</select>			
			</div>
			
			<br>
			<br>
			
			<div class="input-group">
				<input type="text" class="form-control" size="6" id="line" placeholder="from line ...">
			</div>
			<div class="input-group">
				<input type="text" class="form-control" size="6" id="line" placeholder="to line ...  .">
			</div>
			<br>
			<br>
			
			<button type="submit" class="btn btn-default btn-xs">Submit</button>
			
			
				<div id="chart"></div>
				<div id="dataset-picker">
				</div>
				<script type="text/javascript">
				  var margin = { top: 50, right: 0, bottom: 100, left: 30 },
					  width = 960 - margin.left - margin.right,
					  height = 430 - margin.top - margin.bottom,
					  gridSize = Math.floor(width / 24),
					  legendElementWidth = gridSize*2,
					  buckets = 9,
					  colors = ["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"], // alternatively colorbrewer.YlGnBu[9]
					  days = ["Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
					  times = ["1a", "2a", "3a", "4a", "5a", "6a", "7a", "8a", "9a", "10a", "11a", "12a", "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p", "10p", "11p", "12p"];
					  datasets = ["V4data1.tsv", "V4data2.tsv"];

				  var svg = d3.select("#chart").append("svg")
					  .attr("width", width + margin.left + margin.right)
					  .attr("height", height + margin.top + margin.bottom)
					  .append("g")
					  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

				  var dayLabels = svg.selectAll(".dayLabel")
					  .data(days)
					  .enter().append("text")
						.text(function (d) { return d; })
						.attr("x", 0)
						.attr("y", function (d, i) { return i * gridSize; })
						.style("text-anchor", "end")
						.attr("transform", "translate(-6," + gridSize / 1.5 + ")")
						.attr("class", function (d, i) { return ((i >= 0 && i <= 4) ? "dayLabel mono axis axis-workweek" : "dayLabel mono axis"); });

				  var timeLabels = svg.selectAll(".timeLabel")
					  .data(times)
					  .enter().append("text")
						.text(function(d) { return d; })
						.attr("x", function(d, i) { return i * gridSize; })
						.attr("y", 0)
						.style("text-anchor", "middle")
						.attr("transform", "translate(" + gridSize / 2 + ", -6)")
						.attr("class", function(d, i) { return ((i >= 7 && i <= 16) ? "timeLabel mono axis axis-worktime" : "timeLabel mono axis"); });

				  var heatmapChart = function(tsvFile) {
					d3.tsv(tsvFile,
					function(d) {
					  return {
						day: +d.day,
						hour: +d.hour,
						value: +d.value
					  };
					},
					function(error, data) {
					  var colorScale = d3.scale.quantile()
						  .domain([0, buckets - 1, d3.max(data, function (d) { return d.value; })])
						  .range(colors);

					  var cards = svg.selectAll(".hour")
						  .data(data, function(d) {return d.day+':'+d.hour;});

					  cards.append("title");

					  cards.enter().append("rect")
						  .attr("x", function(d) { return (d.hour - 1) * gridSize; })
						  .attr("y", function(d) { return (d.day - 1) * gridSize; })
						  .attr("rx", 4)
						  .attr("ry", 4)
						  .attr("class", "hour bordered")
						  .attr("width", gridSize)
						  .attr("height", gridSize)
						  .style("fill", colors[0]);

					  cards.transition().duration(1000)
						  .style("fill", function(d) { return colorScale(d.value); });

					  cards.select("title").text(function(d) { return d.value; });
					  
					  cards.exit().remove();

					  var legend = svg.selectAll(".legend")
						  .data([0].concat(colorScale.quantiles()), function(d) { return d; });

					  legend.enter().append("g")
						  .attr("class", "legend");

					  legend.append("rect")
						.attr("x", function(d, i) { return legendElementWidth * i; })
						.attr("y", height)
						.attr("width", legendElementWidth)
						.attr("height", gridSize / 2)
						.style("fill", function(d, i) { return colors[i]; });

					  legend.append("text")
						.attr("class", "mono")
						.text(function(d) { return "= " + Math.round(d); })
						.attr("x", function(d, i) { return legendElementWidth * i; })
						.attr("y", height + gridSize);

					  legend.exit().remove();

					});  
				  };

				  heatmapChart(datasets[0]);
				  
				  var datasetpicker = d3.select("#dataset-picker").selectAll(".dataset-button")
					.data(datasets);

				  datasetpicker.enter()
					.append("input")
					.attr("value", function(d){ return "Dataset " + d })
					.attr("type", "button")
					.attr("class", "dataset-button")
					.on("click", function(d) {
					  heatmapChart(d);
					});
				</script>
		</div>
		<br>
		<br>
		<br>
  </body>

<footer style="position: fixed; bottom: 0px; width: 100%; height: 20px; background-color: SandyBrown; >
	<br>
	<p style = "text-align: center"> by Elodie Ikkache, Vatsala Verma, Angeline Neoh Xing Yii & Rebekah Low Jin Yan </p>
</footer>
</html>